"use strict";angular.module("blogApp",["ngAnimate","ngCookies","ngRoute","ngSanitize","ngTouch","restangular"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainController"}).when("/article-list",{templateUrl:"views/article_list.html",controller:"ArticleListController"}).when("/login",{templateUrl:"views/login.html",controller:"LoginController"}).otherwise({redirectTo:"/"})}]),angular.module("blogApp").controller("MainController",["$scope",function(a){}]),angular.module("blogApp").controller("ArticleListController",["$scope","BlogService","ArticleService",function(a,b,c){a.articles={},a.articles.article_search_criteria="",a.articles.mode="MODE_ARTICLE_LIST",a.chooseArticle=function(b){for(var f=0;f<a.articles.article_list.length;f++)if(a.articles.article_list[f].id===b){a.articles.chosenArticle=a.articles.article_list[f],c.listOfCommentsForAnArticle(a.articles.chosenArticle,e,d);break}};var d=function(){console.log("Failed to get list of comments for an article")},e=function(b){a.articles.chosenComments=b},f=function(){console.log("Failed to get list of articles for a blog")},g=function(b){a.articles.article_list=b,a.articles.chosenArticle=b[0],c.listOfCommentsForAnArticle(a.articles.chosenArticle,e,d)},h=function(b){a.articles.listOfBlogs=b,c.listOfArticlesForBlog(b[0],g,f)},i=function(){console.log("Failed to get list of blogs")};b.listOfBlogs(h,i)}]),angular.module("blogApp").controller("CommentsController",["$scope","ArticleService","CommentService",function(a,b,c){a.articles.show_comment_input=!1,a.articles.newComment={},a.newComment=function(b){a.articles.newComment={},a.articles.show_comment_input=!0},a.successForPost=function(b){a.articles.show_comment_input=!1,a.articles.newComment={},a.articles.chosenComments.push(b)},a.failureForPost=function(){a.articles.show_comment_input=!1,a.articles.newComment={},console.log("Failed to post new comment")},a.addNewComment=function(){a.articles.newComment.article_id=a.articles.chosenArticle.id,c.postComment(a.articles.chosenComments,a.articles.newComment,a.successForPost,a.failureForPost)},a.cancelNewComment=function(){a.articles.show_comment_input=!1,a.articles.newComment={}}}]),angular.module("grBlogFilters",[]),angular.module("blogApp").service("BlogService",["Restangular",function(a){a.setRequestSuffix(".json"),a.setBaseUrl("/api/v1"),this.listOfBlogs=function(b,c){var d=a.all("blogs").getList();return d.then(b,c),d}}]),angular.module("blogApp").service("ArticleService",["Restangular",function(a){a.setRequestSuffix(".json"),a.setBaseUrl("/api/v1"),this.listOfArticlesForBlog=function(a,b,c){var d=a.getList("articles");return d.then(b,c),d},this.listOfCommentsForAnArticle=function(a,b,c){var d=a.getList("comments",{article_id:a.id});return d.then(b,c),d}}]),angular.module("blogApp").service("CommentService",["Restangular",function(a){a.setRequestSuffix(".json"),a.setBaseUrl("/api/v1"),this.postComment=function(a,b,c,d){var e=a.post({comment:b});return e.then(c,d),e}}]);